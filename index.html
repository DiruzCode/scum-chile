<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- CUSTOM CSS -->
    <link rel="stylesheet" href="css/style.css">
    <!-- GOOGLE FONT ROBOTO -->
	<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;1,100;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">
	<!-- FONT AWESOME -->
	<script src="https://kit.fontawesome.com/fc2f1695bc.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- CUSTOM JS -->
    <script src="js/vanilla-tilt.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <title>Comunidad SCUM CHILE</title>
</head>
<body>
    <header>
        <nav class="nav">
            <input type="checkbox" id="check">
            <label for="check" class="checkbtn">
                <i class="fas fa-bars"></i>
            </label>
            <a href="" class="nav__logo">
                <img src="img/logo.png" alt="SCUM CHILE">
            </a>
            <ul class="nav__ul">
                <li class="nav__li"><a href="reglas.html">REGLAS</a></li>
                <!-- <li class="nav__li"><a href="multimedia.html">MULTIMEDIA</a></li>
                <li class="nav__li"><a href="mapa.html">MAPA INTERACTIVO</a></li> -->
                <li class="nav__li"><a href="#" class="donation" onclick="coming()">DONACIONES</a></li>
            </ul>
        </nav>
    </header>

    <!-- SECTION HABLA HISPANA -->
    <section class="Container_home">
        <div class="RRSS">
				<a href="https://discord.gg/EZsTytSb4p" target="blank" class="btn_rrss"><i class="fab fa-discord"></i></a>
				<a href="https://store.steampowered.com/app/513710/SCUM/" target="blank" class="btn_rrss"><i class="fab fa-steam"></i></a>
				<a href="#" class="btn_rrss" onclick="coming()"><i class="fab fa-telegram"></i></a>
        </div>
        <div class="titulo_home">
            <h1 class="title_home1">Servidor de</h1>
            <h1 class="title_home2">habla</h1>
            <h1 class="title_home3">hispana</h1>
            <p class="txt_titulo">Sé parte de esta <strong>gran comunidad de SCUM.</strong> <br>
            ¡Llegó la hora de sobrevivir!</p>
        </div>
        <div class="img_home">
            <img src="img/CHAR-02.png" alt="SCUM HABLA HISPANA">
        </div>
    </section>

    <!-- SECTION INFO SERVER -->
    <section class="Container_server">
        <h2 class="title_server">COMUNIDAD SCUM CHILE</h1>
        <div class="description_server">
            <div class="server_details">
                <div class="banner_server">
                    <canvas id="myChart"></canvas>
                </div>
                <div class="txt_details">
                    <p class="txt_details1">
                        <strong>Usuario actualmente conectados : </strong> <span id="players"></span><br>
                        <strong>Ranking actual : </strong> <span id="ranking"></span> <br>
                        <strong>Version : </strong> <span id="version"></span> <br>
                        <strong>Hora actual en el servidor : </strong> <span id="time"></span> <br>
                        <strong>Maximo de players permitidos : </strong> <span id="maxPlayers"></span> <br>
                        <span class="infodetails">Información obtenida desde <a href="https://www.battlemetrics.com/servers/scum/11449879" target="_blank">battlemetrics</a></span>
                    </p>
                    <p class="txt_details2">
                        <strong><i class="fas fa-hand-point-right"></i> NO BOTS</strong> <br>
                        <strong><i class="fas fa-hand-point-right"></i> Último Wipe : </strong> 29/07/2021 <br>
                        <strong><i class="fas fa-hand-point-right"></i> Límine de miembros por squad : </strong> 13 players <br>
                        <strong><i class="fas fa-hand-point-right"></i> Loot rate : </strong> x2 <br>
                        <strong><i class="fas fa-hand-point-right"></i> Respawn de loot : </strong> 45 minutos <br>
                        <strong><i class="fas fa-hand-point-right"></i> Velocidad del día : </strong> x4 <br>
                        <strong><i class="fas fa-hand-point-right"></i> Velocidad del metabolismo : </strong> x4 <br>
                        <strong><i class="fas fa-hand-point-right"></i> Reinicios programados : </strong> 01:00, 12:00, 18:00, 22:00 Hora CL - ARG <br>
                    </p>
                </div>
            </div>
        </div>
        <div class="server_events">
            <div class="bg_events">
                <div class="clip bg_event1">
                    <div class="description_events">
                        <h2>Zona Lockpick y demolición</h2>
                    </div>
                </div>
                <div class="clip bg_event2">
                    <div class="description_events">
                        <h2>Arena PVP</h2>
                    </div>
                </div>
                <div class="clip bg_event3">
                    <div class="description_events">
                        <h2>¡Aventuras en moto!</h2>
                    </div>
                </div>
            </div>
            <div class="detail_events">
                <h3>¡Realizamos eventos semanales!</h3>
                <ul class="Cont_events">
                    <li><i class="fas fa-sign-out-alt"></i> Eventos de lockpick y demolición.</li>
                    <li><i class="fas fa-sign-out-alt"></i> PVP 4 vs 4 vs 4 vs 4.</li>
                    <li><i class="fas fa-sign-out-alt"></i> Carrera de motocross.</li>
                    <li><i class="fas fa-sign-out-alt"></i> Hora feliz los días martes y jueves, donde removemos los sentrys por 1 hora y aumentamos el loot a <strong>x5!</strong></li>
                </ul>
            </div>
        </div>
    </section>

    <!-- SECTION SQUADS -->
    <section class="Section_squads">
        <h1 class="title_squads">ALGUNOS SQUADS <br><span>DE NUESTRA COMUNIDAD</span></h1>
        <div class="Content_Squads">
            <div class="Container_cards">
                <div class="Card">
                    <div class="Box">
                        <div class="Card_Squad1">
                            <p class="txt_squad">DPTM</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="Container_cards">
                <div class="Card">
                    <div class="Box">
                        <div class="Card_Squad2">
                            <p class="txt_squad">vVv</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="Container_cards">
                <div class="Card">
                    <div class="Box">
                        <div class="Card_Squad3">
                            <p class="txt_squad">Wild.i</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="Container_cards">
                <div class="Card">
                    <div class="Box">
                        <div class="Card_Squad4">
                            <p class="txt_squad">Squack</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="Container_cards">
                <div class="Card">
                    <div class="Box">
                        <div class="Card_Squad5">
                            <p class="txt_squad">WLD</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION COMMUNITY -->
    <section class="Container_community">
        <h1 class="title_community">¡ÚNETE A ESTA <br><span>GRAN COMUNIDAD!</span></h1>
        <div class="Contain_community">
            <div class="community">
                <a href="https://discord.gg/EZsTytSb4p" target="blank">
                    <div class="Card_discord">
                        <i class="fab fa-discord"></i><h3>CHAT DISCORD</h3>
                    </div>
                </a>
                <a href="https://store.steampowered.com/app/513710/SCUM/" target="blank">
                    <div class="Card_steam">
                        <i class="fab fa-steam"> </i><h3>COMUNIDAD STEAM</h3>
                    </div>
                </a>
                <a href="#" onclick="coming()">
                    <div class="Card_telegram">
                        <i class="fab fa-telegram"></i><h3>GRUPO TELEGRAM</h3>
                    </div>
                </a>
            </div>
        </div>
    </section>

    <!-- CUSTOM JS -->
    <script>
        // COMING SOON BUTTON
        function  coming() {
            Swal.fire(
                {
                title: '¡Espéralo!',
                text: 'Muy pronto estará habilidato.',
                icon: 'warning',
                iconColor: '#ffd600',
                confirmButtonText: 'OK!',
                confirmButtonColor: '#7d19e2',
                width: 400,
                padding: '2em',
                backdrop: 'rgba(125, 25, 226, 0.15)'
                }
            )
        };


        // BUTTON EFFECT
        
        VanillaTilt.init(document.querySelectorAll(".Contain_community .community a"), {
		max: 30,
		speed: 400,
        glare: true,
        scale: 1,
        "max-glare": 0.6
	    });


        // INFO SERVER

        const dataChart = {
            labels: [],
            datasets: [{
                label: '   ¡JUGADORES ONLINE DEL ÚLTIMO MES!',
                backgroundColor: 'rgb(105, 255, 132)',
                borderColor: 'rgb(5, 205, 132)',
                data: [],
            }]
        };

        const config = {
            type: 'line',
            data: dataChart,
            options: {}
        };
        

        const processData = function (data) {
            const arrayProm = {};
            let lastDate = '';
            data.forEach(element => {
                const date = element.attributes.timestamp.split('T')[0];
                dataChart.labels.push(date)
                dataChart.datasets[0].data.push(element.attributes.max)
            });

            new Chart(
                document.getElementById('myChart'),
                config
            );
        }


        const headers = { method: 'GET',
                    headers: new Headers(),
                    mode: 'cors',
                    cache: 'default' };
        const initDate = new Date();
        initDate.setMonth(initDate.getMonth() - 1);
        const endDate = new Date();
        const HistoryServer = new Request(`https://api.battlemetrics.com/servers/11449879/player-count-history?start=${initDate.toISOString().split('T')[0]}T00%3A00%3A00.000Z&stop=${endDate.toISOString().split('T')[0]}T00%3A00%3A00.000Z&resolution=1440`, headers);

        fetch(HistoryServer).then(function(response) {
            return response.json();
        }).then(function (data) {
            if(data.data){
                const sortedDataByDate = data.data.sort((a, b) => new Date(a.attributes.timestamp) - new Date(b.attributes.timestamp))
                processData(sortedDataByDate)
            }else{
                console.log("UPS!!")
            }
        });


        const InfoServer = new Request('https://api.battlemetrics.com/servers/11449879', headers);

        fetch(InfoServer).then(function (response) {
            return response.json();
        }).then(function (data) {
            if (data.data) {
                document.getElementById('players').textContent = data.data.attributes.players;
                document.getElementById('ranking').textContent = `#${data.data.attributes.rank}`;
                document.getElementById('version').textContent = `${data.data.attributes.details.version}`;
                document.getElementById('time').textContent = `${data.data.attributes.details.time} hrs`;
                document.getElementById('maxPlayers').textContent = `${data.data.attributes.maxPlayers}`;
            } else {
                console.log("UPS!!")
            }
        });
        
    </script>

    <!-- FOOTER -->
    <footer class="Container_footer">
        <p>© 2021 <a href="https://www.behance.net/jhdesigner"><strong>Jhdesigner</strong></a> & <a href="https://github.com/DiruzCode"><strong>Diruzcode</strong></a>. <br>All trademarks and contents belong to their respective owners.</p>
    </footer>

</body>
</html>